<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è£œåŠ©å“¡é‡é‡è¨ˆç®—ã‚²ãƒ¼ãƒ </title>
<style>
body { 
    font-family: 'Segoe UI'; 
    text-align: center; 
    background: #0a1f2e; /* å†¬ã£ã½ã„æ¿ƒã„ãƒ–ãƒ«ãƒ¼ */
    color: #e0f7ff; /* å†¬ã£ã½ã„æ˜ã‚‹ã„æ°´è‰² */
    margin:0; 
    padding:0; 
}

h1 { 
    font-size: clamp(1.2rem,4vw,2rem); 
    margin-top:10px; 
}
h2 { 
    font-size: clamp(1rem,3.5vw,1.5rem); 
    margin:5px; 
    color: #aee1ff; /* å†¬ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ */
}

button { 
    background:#1e90ff; /* å†¬ã®é’ç³»ãƒœã‚¿ãƒ³ */
    color:#fff; 
    border:none; 
    padding:12px 24px; 
    border-radius:10px; 
    cursor:pointer; 
    font-size:clamp(1rem,3vw,1.2rem); 
    margin:10px; 
    box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* å†¬ã®å†·ãŸã„å½± */
}
button:hover { 
    background:#0f78d4; 
}
button:disabled { 
    background:#555; 
    cursor:not-allowed; 
}

/* ãƒ—ãƒ¬ãƒ¼ãƒˆ */
.plates, .selected-area { 
    display:flex; 
    justify-content:center; 
    gap:10px; 
    flex-wrap:wrap; 
    margin-inline:auto; 
    max-width:600px; 
}
.plate, .selected-plate { 
    border-radius:50%; 
    width:clamp(60px,18vw,80px); 
    height:clamp(60px,18vw,80px); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    cursor:pointer; 
    font-weight:bold; 
    transition: transform 0.2s, background 0.3s; 
    user-select:none; 
    flex-direction:column; 
    background: linear-gradient(145deg, #88d1f0, #c0ebff); /* æ°·ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ‡ */
    color: #002a3c;
}
.plate:active { 
    transform: scale(0.9); 
}
.selected-plate { 
    width:clamp(50px,15vw,70px); 
    height:clamp(50px,15vw,70px); 
    font-size:clamp(0.8rem,3vw,1rem); 
    background: linear-gradient(145deg, #55b0e0, #88d1f0); /* é¸æŠæ™‚ã®å¼·èª¿ */
}

/* æƒ…å ±è¡¨ç¤º */
#bar, #target, #result { 
    font-size:clamp(1.4rem,3.5vw,1.3rem); 
    margin:5px; 
    color: #d0f0ff;
}

/* å›ºå®šãƒœã‚¿ãƒ³ */
#setumeiBtn { 
    position: fixed; 
    bottom: 10px; 
    left: 10px; 
    padding: 8px 12px; 
    font-size: clamp(1rem,3vw,1.2rem); 
    border-radius: 10px;
    background:#3399ff;
    color:#fff;
}
#recordModeBtn { 
    position: fixed; 
    bottom: 10px; 
    right: 10px; 
    padding: 8px 12px; 
    font-size: clamp(1rem,3vw,1.2rem); 
    border-radius: 10px;
    background:#3399ff;
    color:#fff;
}
#okBtn {
    display: inline-block;
    margin: 10px auto;
    padding: 10px 20px;
    font-size: clamp(1rem,3vw,1.2rem);
    border-radius: 10px;
    background:#1e90ff;
    color:#fff;
}

#snowCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* é›ªãŒã‚¯ãƒªãƒƒã‚¯ã‚’é‚ªé­”ã—ãªã„ */
  z-index: 9999;
}

/* å°ã•ã„ç”»é¢ç”¨ */
@media (max-width:520px){
    #setumeiBtn, #recordModeBtn, #okBtn {
        padding: 6px 10px;
        font-size: clamp(0.9rem,4vw,1.1rem);
    }
}
</style>
</head>
<body>

<h1>ğŸ‹ï¸â€â™‚ï¸ ãƒ‘ãƒ¯ãƒ¼ãƒªãƒ•ãƒ†ã‚£ãƒ³ã‚°è£œåŠ©å“¡ã‚²ãƒ¼ãƒ </h1>
<p><h4>è‡ªåˆ†ã®è¨˜éŒ²ã‚’Xã§æŠ•ç¨¿ã—ã‚ˆã†ï¼#è£œåŠ©å“¡è‚²æˆã‚²ãƒ¼ãƒ  ã§æŠ•ç¨¿</h4></p>
<p>ãƒãƒ¼é‡é‡: 20kg</p>

<button id="recordModeBtn" onclick="location.href='kiroku.html';">è¨˜éŒ²ãƒ¢ãƒ¼ãƒ‰</button>
<button id="setumeiBtn" onclick="location.href='menyu.html'">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</button>

<h2 id="target"></h2>
<div class="plates" id="plates"></div>
<p id="bar">ç¾åœ¨ã®åˆè¨ˆ: 0kg</p>
<button id="okBtn" disabled>OK</button>
<p id="result"></p>
<h3>ä½¿ç”¨ãƒ—ãƒ¬ãƒ¼ãƒˆ:</h3>
<div class="selected-area" id="selectedArea"></div>
  <canvas id="snowCanvas"></canvas>
<script>
const plateData=[
  {weight:25,color:'red'},
  {weight:20,color:'blue'},
  {weight:15,color:'yellow',textColor:'black'},
  {weight:10,color:'green'},
  {weight:5,color:'white',textColor:'black'},
  {weight:2.5,color:'black'},
  {weight:2.5,color:'silver',label:'2.5(ã‚«ãƒ©ãƒ¼)'},
  {weight:1.25,color:'#7fae7f'}
];

let selected=[], targetWeight=0;
const okBtn = document.getElementById('okBtn');
okBtn.disabled = true;

function startGame(){
  const possibleWeights=[];
  for(let w=25; w<=350; w+=2.5) possibleWeights.push(w);
  targetWeight = possibleWeights[Math.floor(Math.random()*possibleWeights.length)];
  selected=[];
  okBtn.disabled = true;

  document.getElementById('target').textContent=`ç›®æ¨™é‡é‡: ${targetWeight} kg`;
  document.getElementById('result').textContent='';
  document.getElementById('selectedArea').innerHTML='';
  renderPlates();
  updateTotal();
}

function renderPlates(){
  const div=document.getElementById('plates');
  div.innerHTML='';
  plateData.forEach(p=>{
    const el=document.createElement('div');
    el.className='plate';
    el.textContent=p.label||p.weight;
    el.style.background=p.color;
    el.style.color=p.textColor||'#fff';
    el.onclick = () => {
      const has25 = selected.some(x => x.weight === 25);
      if(targetWeight >= 75 && p.color === "blue" && !has25){
        document.getElementById('result').textContent = "âš ï¸ æœ€åˆã«20kg(é’)ã¯ç½®ã‘ã¾ã›ã‚“ã€‚å…ˆã«25kgã‚’ç½®ã„ã¦ãã ã•ã„ã€‚";
        return;
      }
      addPlate(p);
    };
    div.appendChild(el);
  });
}

function addPlate(p){
  selected.push(p);
  updateTotal();
  renderSelected();
}

function renderSelected(){
  const area = document.getElementById('selectedArea');
  area.innerHTML = '';
  selected.forEach((p,index)=>{
    const el=document.createElement('div');
    el.className='selected-plate';
    el.style.background = p.color;
    el.style.color = p.textColor || '#fff';
    el.innerHTML = `<div>${p.label||p.weight}</div>`;
    el.onclick = () => {
      selected.splice(index,1);
      renderSelected();
      updateTotal();
    };
    area.appendChild(el);
  });
}

function updateTotal(){
  const plateSum = selected.reduce((a,b)=>a+b.weight,0);
  const total = 20 + plateSum*2;
  const bar = document.getElementById('bar');
  bar.textContent=`ç¾åœ¨ã®åˆè¨ˆ: ${total.toFixed(2)} kg`;

  const diff = Math.abs(total - targetWeight);
  bar.style.color = diff === 0 ? '#0f0' : diff <= 5 ? '#ff0' : '#fff';

  const lastPlate = selected[selected.length-1];
  const lastPlateIsColor = lastPlate && lastPlate.color==='silver';
  const colorInMiddle = selected.slice(0,-1).some(p=>p.color==='silver');
  let colorBefore125=false;
  selected.forEach((p,i)=>{
    if(p.color==='silver' && i<selected.length-1 && selected[i+1].weight===1.25) colorBefore125=true;
  });

  let resultText="";
  if(total===targetWeight && lastPlateIsColor && !colorInMiddle && !colorBefore125){
    resultText="âœ… æ­£è§£ï¼ï¼ˆæœ€å¾Œã«ã‚«ãƒ©ãƒ¼ä»˜ãOKï¼‰";
    okBtn.disabled=false;
  } else if(total===targetWeight && !lastPlateIsColor){
    resultText="âš ï¸ æœ€å¾Œã«å¿…ãšã‚«ãƒ©ãƒ¼ã‚’ç½®ã„ã¦ãã ã•ã„";
  } else if(colorInMiddle){
    resultText="âš ï¸ ã‚«ãƒ©ãƒ¼ã¯æœ€å¾Œã«1å›ã ã‘ç½®ã„ã¦ãã ã•ã„";
  } else if(colorBefore125){
    resultText="âš ï¸ ã‚«ãƒ©ãƒ¼ã®å¾Œã«1.25kgã¯ç½®ã‘ã¾ã›ã‚“";
  } else if(total>targetWeight){
    resultText="âŒ ã‚ªãƒ¼ãƒãƒ¼";
  }

  document.getElementById('result').textContent=resultText;
}

okBtn.onclick = () => { startGame(); };

startGame();

const canvas = document.getElementById('snowCanvas');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

const snowflakes = [];
const snowCount = 100; // é›ªã®ç²’ã®æ•°

// é›ªã®ç²’ã®åˆæœŸåŒ–
for (let i = 0; i < snowCount; i++) {
  snowflakes.push({
    x: Math.random() * width,
    y: Math.random() * height,
    radius: Math.random() * 4 + 1, // ã‚µã‚¤ã‚º
    speed: Math.random() * 1 + 0.5, // è½ä¸‹é€Ÿåº¦
    wind: Math.random() * 1 - 0.5 // å·¦å³ã®æºã‚Œ
  });
}

// æç”»ãƒ«ãƒ¼ãƒ—
function drawSnow() {
  ctx.clearRect(0, 0, width, height);
  ctx.fillStyle = 'white';
  ctx.beginPath();
  
  snowflakes.forEach(flake => {
    ctx.moveTo(flake.x, flake.y);
    ctx.arc(flake.x, flake.y, flake.radius, 0, Math.PI * 2);
  });
  
  ctx.fill();

  // é›ªã®ä½ç½®æ›´æ–°
  snowflakes.forEach(flake => {
    flake.y += flake.speed;
    flake.x += flake.wind;
    
    if (flake.y > height) flake.y = 0;
    if (flake.x > width) flake.x = 0;
    if (flake.x < 0) flake.x = width;
  });

  requestAnimationFrame(drawSnow);
}

drawSnow();

// ç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´å¯¾å¿œ
window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});


// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸­ãªã‚‰ç§»å‹•
const isUpdating = false; // trueãªã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸­ã€€falseãªã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå®Œäº†
if (isUpdating) {
  // sinseiãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰è¦‹ãŸãƒ‘ã‚¹
  window.location.href = "purokisi.html";
}
</script>
<script src="koukoku.js" defer></script>

</body>
</html>

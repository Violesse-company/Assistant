<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è£œåŠ©å“¡é‡é‡è¨ˆç®—ã‚²ãƒ¼ãƒ </title>
<style>
body {
    font-family: 'Carter One', cursive;
    text-align: center;
    background: #1b0f26 url("https://cdn.pixabay.com/photo/2017/10/25/16/23/halloween-2893710_1280.jpg") center/cover no-repeat;
    color: #ffeed6;
    margin: 0;
    padding: 0;
}

/* ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒãƒ­ã‚¦ã‚£ãƒ³è‰²ã§å…‰ã‚‹ */
h1 {
    font-size: clamp(1.2rem,4vw,2rem);
    margin-top: 10px;
    color: #ffa726;
    text-shadow: 0 0 8px #ff6f00;
}

h2 {
    font-size: clamp(1rem,3.5vw,1.5rem);
    margin: 5px;
    color: #ffe0b2;
    text-shadow: 0 0 5px #ff6f00;
}

/* ğŸƒ ãƒœã‚¿ãƒ³ãƒ»ãƒãƒ­ã‚¦ã‚£ãƒ³ã‚«ãƒ©ãƒ¼ */
button {
    background: #ff6f00;
    color: #fff;
    border: none;
    padding: 12px 24px;
    border-radius: 12px;
    cursor: pointer;
    font-size: clamp(1rem,3vw,1.2rem);
    margin: 10px;
    box-shadow: 0 0 10px #ff9100;
    transition: 0.2s;
}
button:hover {
    background: #ffa726;
    transform: scale(1.05);
}
button:disabled {
    background: #5c3a13;
    cursor: not-allowed;
}

/* ãƒ—ãƒ¬ãƒ¼ãƒˆUIï¼ˆè¦‹ãŸç›®ã ã‘ãƒãƒ­ã‚¦ã‚£ãƒ³é¢¨ã«ï¼‰ */
.plates, .selected-area {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-inline: auto;
    max-width: 600px;
}

/* ãƒãƒ­ã‚¦ã‚£ãƒ³ã£ã½ãå°‘ã—å…‰ã‚‰ã›ã‚‹ */
.plate, .selected-plate {
    border-radius: 50%;
    width: clamp(60px,18vw,80px);
    height: clamp(60px,18vw,80px);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-weight: bold;
    transition: transform 0.2s;
    user-select: none;
    flex-direction: column;
    box-shadow: 0 0 12px rgba(255, 102, 0, 0.7), 0 0 8px inset #000;
}
.plate:active {
    transform: scale(0.9) rotate(-3deg);
}
.selected-plate {
    width: clamp(50px,15vw,70px);
    height: clamp(50px,15vw,70px);
    font-size: clamp(0.8rem,3vw,1rem);
}

/* é‡é‡è¡¨ç¤º */
#bar, #target, #result {
    font-size: clamp(1rem,3.5vw,1.3rem);
    margin: 5px;
    color: #ffd59e;
    text-shadow: 0 0 6px #ff9100;
}

/* âœ…ãƒšãƒ¼ã‚¸ç§»å‹•ãƒœã‚¿ãƒ³ã‚‚ãƒãƒ­ã‚¦ã‚£ãƒ³è‰²ã§çµ±ä¸€ */
#setumeiBtn {
    position: fixed;
    bottom: 10px;
    left: 10px;
    padding: 5px 5px;
    font-size: clamp(1rem,3vw,1.2rem);
    border-radius: 10px;
    background:#ff6f00;
    box-shadow:0 0 8px #ff9100;
}

#rankingBtn {
    position: fixed;
    bottom: 10px;
    left: 130px;
    padding: 5px 5px;
    font-size: clamp(1rem,3vw,1.2rem);
    border-radius: 10px;
    background:#ff6f00;
    box-shadow:0 0 8px #ff9100;
}

#feedbackBtn {
    position: fixed;
    bottom: 10px;
    left: 405px;
    padding: 5px 5px;
    font-size: clamp(1rem,3vw,1.2rem);
    border-radius: 10px;
    background:#ff6f00;
    box-shadow:0 0 8px #ff9100;
}

</style>
</head>
<body>

<h1>ğŸ‹ï¸â€â™‚ï¸ ãƒ‘ãƒ¯ãƒ¼ãƒªãƒ•ãƒ†ã‚£ãƒ³ã‚°è£œåŠ©å“¡ã‚²ãƒ¼ãƒ </h1>
<p><h4>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ: 11æœˆ5æ—¥ã¾ã§ãƒãƒ­ã‚¦ã‚£ãƒ³ã®è‰²</h4></p>
<p>ãƒãƒ¼é‡é‡: 20kg</p>

<button id="okBtn" disabled>OK</button>

<button id="recordModeBtn" style="position:fixed; bottom:10px; right:10px;"
  onclick="location.href='kiroku.html';">è¨˜éŒ²ãƒ¢ãƒ¼ãƒ‰</button>

<button id="setumeiBtn" onclick="location.href='setumei.html'">èª¬æ˜ãƒ¢ãƒ¼ãƒ‰</button>

<button id="rankingBtn" onclick="location.href='ranking.html'">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</button>

<button id="feedbackBtn" onclick="location.href='fiidobaltuku.html'">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</button>

<h2 id="target"></h2>
<div class="plates" id="plates"></div>
<p id="bar">ç¾åœ¨ã®åˆè¨ˆ: 0kg</p>
<p id="result"></p>
<h3>ä½¿ç”¨ãƒ—ãƒ¬ãƒ¼ãƒˆ:</h3>
<div class="selected-area" id="selectedArea"></div>

<script>
const plateData=[
  {weight:25,color:'red'},
  {weight:20,color:'blue'},
  {weight:15,color:'yellow',textColor:'black'},
  {weight:10,color:'green'},
  {weight:5,color:'white',textColor:'black'},
  {weight:2.5,color:'black'},
  {weight:2.5,color:'silver',label:'2.5(ã‚«ãƒ©ãƒ¼)'},
  {weight:1.25,color:'#7fae7f'}
];

let selected=[],targetWeight=0;
let okBtn = document.getElementById('okBtn');
okBtn.disabled = true;

function startGame(){
  const possibleWeights=[];
  // 25kg ã‹ã‚‰ 350kg ã¾ã§
  for(let w=25; w<=350; w+=2.5) possibleWeights.push(w);
  targetWeight = possibleWeights[Math.floor(Math.random()*possibleWeights.length)];
  selected=[];
  okBtn.disabled = true;

  document.getElementById('target').textContent=`ç›®æ¨™é‡é‡: ${targetWeight} kg`;
  document.getElementById('target').style.color='#1031ff';
  document.getElementById('result').textContent='';
  document.getElementById('selectedArea').innerHTML='';
  renderPlates();
  updateTotal();
}

function renderPlates(){
  const div=document.getElementById('plates');
  div.innerHTML='';
  plateData.forEach(p=>{
    const el=document.createElement('div');
    el.className='plate';
    el.textContent=p.label||p.weight;
    el.style.background=p.color;
    el.style.color=p.textColor||'#fff';

el.onclick = () => {
  // âœ… 75kgä»¥ä¸Šã§ã€é’ã‚’æŠ¼ã—ãŸã„ã€ã‹ã¤25kgãŒã¾ã å…¥ã£ã¦ãªã„ â†’ æŠ¼ã›ãªã„
  const has25 = selected.some(x => x.weight === 25);
  if(targetWeight >= 75 && p.color === "blue" && !has25){
    document.getElementById('result').textContent = "âš ï¸ æœ€åˆã«20kg(é’)ã¯ç½®ã‘ã¾ã›ã‚“ã€‚å…ˆã«25kgã‚’ç½®ã„ã¦ãã ã•ã„ã€‚";
    return;
  }
  addPlate(p);
};


    div.appendChild(el);
  });
}

function addPlate(p){
  selected.push(p);
  updateTotal();
  renderSelected();
}

function renderSelected(){
  const area = document.getElementById('selectedArea');
  area.innerHTML = '';
  selected.forEach((p,index)=>{
    const el=document.createElement('div');
    el.className='selected-plate';
    el.style.background = p.color;
    el.style.color = p.textColor || '#fff';
    el.innerHTML = `<div>${p.label||p.weight}</div>`;
    el.onclick = () => {
      selected.splice(index,1);
      renderSelected();
      updateTotal();
    };
    area.appendChild(el);
  });
}

function updateTotal(){
  const plateSum = selected.reduce((a,b)=>a+b.weight,0);
  const total = 20 + plateSum*2;
  const bar = document.getElementById('bar');
  bar.textContent=`ç¾åœ¨ã®åˆè¨ˆ: ${total.toFixed(2)} kg`;

  // âœ… ç›®æ¨™ã¨ã®å·®ã§è‰²å¤‰åŒ–
  const diff = Math.abs(total - targetWeight);
  if(diff === 0) bar.style.color = '#0f0';       // ç·‘ï¼šæ­£è§£
  else if(diff <= 5) bar.style.color = '#ff0';    // é»„è‰²ï¼šè¿‘ã„
  else bar.style.color = '#fff';                  // ç™½ï¼šã¾ã é ã„

  const lastPlate = selected[selected.length-1];
  const lastPlateIsColor = lastPlate && lastPlate.color==='silver';
  const colorInMiddle = selected.slice(0,-1).some(p=>p.color==='silver');
  let colorBefore125=false;
  selected.forEach((p,i)=>{
    if(p.color==='silver' && i<selected.length-1 && selected[i+1].weight===1.25) colorBefore125=true;
  });

  let resultText="";
  if(total===targetWeight && lastPlateIsColor && !colorInMiddle && !colorBefore125){
    resultText="âœ… æ­£è§£ï¼ï¼ˆæœ€å¾Œã«ã‚«ãƒ©ãƒ¼ä»˜ãOKï¼‰";
    okBtn.disabled=false;
  } else if(total===targetWeight && !lastPlateIsColor){
    resultText="âš ï¸ æœ€å¾Œã«å¿…ãšã‚«ãƒ©ãƒ¼ã‚’ç½®ã„ã¦ãã ã•ã„";
  } else if(colorInMiddle){
    resultText="âš ï¸ ã‚«ãƒ©ãƒ¼ã¯æœ€å¾Œã«1å›ã ã‘ç½®ã„ã¦ãã ã•ã„";
  } else if(colorBefore125){
    resultText="âš ï¸ ã‚«ãƒ©ãƒ¼ã®å¾Œã«1.25kgã¯ç½®ã‘ã¾ã›ã‚“";
  } else if(total>targetWeight){
    resultText="âŒ ã‚ªãƒ¼ãƒãƒ¼";
  }

  document.getElementById('result').textContent=resultText;
}

// âœ… OKãƒœã‚¿ãƒ³ã§æ¬¡ã®ç›®æ¨™ã«é€²ã‚€
okBtn.onclick = () => { startGame(); };

startGame();

</script>

</body>
</html>
